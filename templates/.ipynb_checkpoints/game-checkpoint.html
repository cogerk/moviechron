<!DOCTYPE html>
{% from "_helpers.html" import render_board %}
<html>
<head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.2.6/jquery.min.js"></script>
    <style>
        h2 {margin:0;}
        body {font-family: verdana;}
        .pile{margin: auto;
                  width: 50%;
                  text-align: center;
                  padding: 10px;}
        .inbetween{
            margin:auto;
                vertical-align: middle;
                height: 200px;
                width: 25px;
                display: inline-block;}
        .inbetween:hover{width:50px;}
        .movie {vertical-align: middle;
                height: 200px;
                width: 125px;
                font-size: 12px;
                box-shadow: 2px 4px 8px 0 grey;
                text-align: center;
                display: inline-block;
                padding:5px;
                border-radius:5px;}
        .selected {box-shadow:4px 8px 16px 0 black;}

        div.wings span {-webkit-filter: grayscale(100%); /* Safari 6.0 - 9.0 */
                         filter: grayscale(100%);}
        div.wings p.year {visibility:hidden;}
        .movie:hover {opacity:50;
                      filter: alpha(opacity=50); /* For IE8 and earlier */}

        img:hover {
      opacity: 0.5;
      filter: alpha(opacity=50); /* For IE8 and earlier */
    }
    </style>
</head>
    
<body>
    {{render_board(game)}}
</body>
</html>



<script src='http://code.jquery.com/jquery-1.11.0.min.js'></script>

<script>
function isEmpty(obj) {
    // Util function to see if list is empty
    for(var key in obj) {
        if(obj.hasOwnProperty(key))
            return false;
    }
    return true;
}
    
function selectWingMovie() {
    // Select movie in wings that user clicked on
    var unselect = document.getElementsByClassName("selected");
    if (!isEmpty(unselect)) {
        var idx;
        for (idx = 0; idx < unselect.length; idx++) { 
            if (!(unselect[idx] == event.currentTarget)) {
                unselect[idx].classList.toggle("selected");
            }
        }
    }
    var select = event.currentTarget
    select.classList.toggle("selected");
}
    
    
function placeMovie(clicked_id) {
    // Get movies user placed selected movie in between
    var select = document.getElementsByClassName("selected");
    if (!isEmpty(select)) {
        
        $.ajax({
            url: '/send_guess',
            type: 'POST',
            contentType: 'application/json',
            data: JSON.stringify({
                game_id: $('.game').attr('id'),
                guess_id:select[0].id,
                location_id:clicked_id
        }),
            success: function(new_board){$('body').html(new_board)
                                        console.log($('.game').attr('id'))},
        dataType: 'html'
        
    });
      
        
    }

}
</script>